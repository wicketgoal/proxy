<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Working Video Demo - Educational</title>
    <link href="https://vjs.zencdn.net/8.0.4/video-js.css" rel="stylesheet" />
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: #fff;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        #videoPlayer {
            width: 100%;
            height: 500px;
            margin: 20px 0;
            background: #000;
        }
        .stream-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }
        .stream-btn {
            padding: 15px;
            background: #2a4a5a;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
        }
        .stream-btn:hover {
            background: #3a5a6a;
        }
        .stream-btn.working {
            background: #2a5a2a;
        }
        .status {
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            background: #2a4a5a;
        }
        .status.success { background: #2a5a2a; }
        .status.error { background: #5a2a2a; }
        .info-box {
            background: #2a2a5a;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŽ¥ Working Video Stream Demo</h1>
        <p>Click any button below to load a working test stream:</p>

        <div class="info-box">
            <h3>âœ… Pre-tested Working Streams:</h3>
            <p>These streams are known to work without CORS issues:</p>
        </div>

        <div class="stream-buttons">
            <button class="stream-btn working" onclick="loadStream(1)">
                ðŸ“º Stream 1<br>
                <small>Mux Test Video</small>
            </button>
            <button class="stream-btn working" onclick="loadStream(2)">
                ðŸ“º Stream 2<br>
                <small>Apple Test Stream</small>
            </button>
            <button class="stream-btn working" onclick="loadStream(3)">
                ðŸ“º Stream 3<br>
                <small>Live Test Stream</small>
            </button>
            <button class="stream-btn working" onclick="loadStream(4)">
                ðŸ“º Stream 4<br>
                <small>Unified Streaming</small>
            </button>
        </div>

        <div id="status" class="status">
            ðŸ‘† Click a stream above to start playing
        </div>

        <video-js id="videoPlayer" class="video-js vjs-default-skin" controls preload="auto">
            Your browser doesn't support video playback.
        </video-js>

        <div class="info-box">
            <h3>ðŸ”§ Technical Details:</h3>
            <p>This demo uses <strong>direct stream URLs</strong> that don't require CORS proxies because they're configured to allow cross-origin requests.</p>
            <p><strong>Why this works:</strong> These servers include proper CORS headers allowing any website to play their streams.</p>
        </div>
    </div>

    <!-- Video.js -->
    <script src="https://vjs.zencdn.net/8.0.4/video.min.js"></script>
    <!-- HLS.js for better HLS support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    
    <script>
        let player;

        // Pre-tested working streams
        const streams = {
            1: {
                url: 'https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8',
                name: 'Mux Test Video (SD)'
            },
            2: {
                url: 'https://devstreaming-cdn.apple.com/videos/streaming/examples/img_bipbop_adv_example_ts/master.m3u8',
                name: 'Apple BipBop Test'
            },
            3: {
                url: 'https://cph-p2p-msl.akamaized.net/hls/live/2000341/test/master.m3u8',
                name: 'Live Test Stream'
            },
            4: {
                url: 'https://demo.unified-streaming.com/k8s/features/stable/video/tears-of-steel/tears-of-steel.ism/.m3u8',
                name: 'Tears of Steel Demo'
            }
        };

        function updateStatus(message, type = '') {
            const statusEl = document.getElementById('status');
            statusEl.textContent = message;
            statusEl.className = `status ${type}`;
            console.log(message);
        }

        function loadStream(streamId) {
            const stream = streams[streamId];
            if (!stream) return;

            updateStatus(`â³ Loading: ${stream.name}...`);

            // Destroy existing player
            if (player) {
                player.dispose();
            }

            // Create new player
            player = videojs('videoPlayer', {
                controls: true,
                autoplay: true,
                preload: 'auto',
                fluid: true,
                sources: [{
                    src: stream.url,
                    type: 'application/x-mpegURL'
                }]
            });

            // Set up event listeners
            player.ready(function() {
                updateStatus(`âœ… Loaded: ${stream.name}`, 'success');
                
                player.on('loadstart', function() {
                    console.log('Video load started');
                });

                player.on('loadeddata', function() {
                    console.log('Video data loaded');
                });

                player.on('playing', function() {
                    updateStatus(`ðŸŽ¬ Now playing: ${stream.name}`, 'success');
                });

                player.on('error', function() {
                    const error = player.error();
                    console.error('Player error:', error);
                    updateStatus(`âŒ Error: ${error?.message || 'Failed to load stream'}`, 'error');
                });
            });
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            player = videojs('videoPlayer', {
                controls: true,
                preload: 'auto',
                fluid: true
            });
            
            // Auto-load first stream
            setTimeout(() => loadStream(1), 1000);
        });
    </script>
</body>
</html>
